---
title: Reading notes-core python programming-chapter four
categories: tech
tags: python
---

## 第4章 Python对象 ##

### 4.1 Python对象 ###

Python使用对象模型来存储数据。构建任何类型的值都是一个对象。

所有的Python对象都拥有三个特性：身份，类型和值。

- 身份： 每个对象都有一个唯一的身份标识自己，任何对象的身份都可以使用内建函数id()来得到。这个值可以被认为是该对象的内存地址。
- 类型： 对象的类型决定了该对象可以保存什么类型的值，可以进行什么样的操作，以及遵循什么样的规则。可以使用内建函数type()查看Python对象的类型。
- 值： 对象标识的数据项。

### 4.2 标准类型 ###
- 数字（分为几个子类型，其中有三个是整型）
- Boolean 布尔型
- Long integer 长整型
- Floating point real number 浮点型
- Complex number 复数型
- String 字符串
- List 列表
- Tuple 元组
- Dictionary 字典

### 4.3 其它内建类型 ###、

- 类型
- Null对象（None)
- 文件
- 集合/固定集合
- 函数/方法
- 模块
- 类

#### 4.3.1 类型对象和type类型对象 ####

    >>> type(1)
	<type 'int'>
	>>> type('1')
	<type 'str'>
	>>> type(type(1))
	<type 'type'>

1是整型，然后int类型是type。所有类型对象的类型都是type，它也是所有Python类型的根和所有Python标准类的默认元类（metadass）。

类就是类型，实例是对应类型的对象。

#### 4.3.2 None---Python的Null对象

Python有一个特殊的类型，被称为Null对象或者NoneType，它只有一个值，那就是None。它不支持任何运算也没有任何内建方法。None类型最接近C语言中的void， None类型的值和C的NULL值非常相似。

None没有什么有用的属性， 它的布尔值总是False

所有标准对象均可用于布尔测试，每个对象天生具有布尔True或False值。

下面对象的布尔值是False：

- None
- False
- 所有值为零的数
- 0
- 0.0
- 0L
- 0.0 + 0.0j
- ""
- []
- ()
- {}

### 4.4 内部类型 ###

#### 4.4.1 代码对象 ###

代码对象是编译过的Python源代码片段，它是可执行对象。通过调用内建函数compile()可以得到代码对象。代码对象可以被exec命令或者eval()内建函数来执行。

#### 4.4.2 帧对象 ####

帧对象表示Python的执行栈帧。帧对象包含Python解释器在运行时所需知道的所有信息。它的属性包括指向上一帧的链接，正在被执行的代码对象，正在被执行的代码对象，本地以及全局名称空间字典以及当前指令。每次函数调用产生一个新的帧，每一个帧对象都会相应创建一个C栈帧。用到帧对象的一个地方是跟踪记录对象。

#### 4.4.3 跟踪记录对象 ####

当代码出错时， Python就会引发一个异常。 如果异常未被捕获和处理，解释器就会推出脚本运行。

当异常发生时，一个包含针对异常的栈跟踪信息的跟踪记录对象就会被创建。 如果一个异常有自己的处理程序， 处理程序就可以访问这个跟踪记录对象。

#### 4.4.4 切片对象 ####

当使用Python扩展的切片语法时，就会创建切片对象。扩展的切片语法允许不同的索引切片操作，包括进切片，多维切片和省略切片。切片对象也可以由内建函数slice()来生成。

    >>> foostr = 'abcde'
	>>> foostr[::-1]
	'edcba'
	>>> foostr[::1]
	'abcde'

#### 4.4.5 省略对象 ####

省略对象用于扩展切片语法中，起记号作用。这个对象在切片语法中表示省略号。类似Null对象 None,省略对象有一个唯一的名字Ellipsis,它的布尔值始终为True。

#### 4.4.6 XRange对象 ####

调用内建函数xrange()会生成一个xrange对象，xrange（）是内建函数range()的兄弟版本，用于需要节省额你存或range()无法完成超大数据集合。

### 4.5 标准类型操作符 ###

#### 4.5.1 对象值的比较 ####

比较操作符用来判断同类型对象是否相等， 所有的内建类型均支持比较运算，比较运算返回布尔值True或False。

    >>> 2 == 2
	True
	>>> 2.1 <= 9.0
	True
	>>> 'abc' < 'xyz'
	True
	>>> 'abc' > 'xyz'
	False
#### 4.5.2 对象身份比较 ####

	>>> a = b= 3
	>>> a is b
	True
	>>> id(a) == id(b)
	True
	>>> id(1)
	25769903912

Python仅缓存简单整型，因为它认为在Python应用中这些小整型经常会被用到。

	>>> c = 1
	>>> d = 1
	>>> id(c)
	25769903912
	>>> id (d)
	25769903912


#### 4.5.3 布尔类型 ####

布尔操作符and, or和not都是Python关键字， not拥有最高的优先级。

### 4.6 标准类型内建函数 ###

#### 4.6.1 type() ####

type(object)，现在type时一个“工厂函数”。
type() 接受一个对象作为参数，并返回它的类型。它的返回值时一个类型对象。

#### 4.6.2 cpm() ####

内建函数cmp()用于比较两个对象obj1和obj2。 如果obj1 小于 obj2,则则返回一个负整数，否额返回一个正整数。比较是在对象之间进行的。如果是用户自定义对象，cmp()会调用该类的特殊方法。

#### 4.6.3 str()和repr()（及``操作符）

str()函数得到的字符串可读性好，而repr()函数得到的字符串通常可以用来重新获取该对象，通常 obj == eval(repr(obj))

	>>> str(4.53-2j)
	'(4.53-2j)'
	>>> str(2)
	'2'
	>>> str(2e10)
	'20000000000.0'  

	>>> repr(2e10)
	'20000000000.0'
	>>> repr(1)
	'1'
	>>> `1`
	'1'
	>>> `2e10`
	'20000000000.0'

repr()函数取得的字符串，可以通过eval()求值重新获取该对象。并不是所有eval()内建函数都能得到原来的对象。

	>>> eval(str(1))
	1
	>>> eval(str(2e10))
	20000000000.0

repr()输出对Python比较友好，而str()的输出对用户比较友好。虽然如此，很多情况下这三者的输出仍然都是完全一样的。

在Python中，你偶尔会遇到某个操作符和某个函数是做同样一件事情。之所以如此是因为某些场合函数会比操作符更适合使用。

#### 4.6.4 type()和isinstance() ####

Python不支持方法或函数重载，因此你必须自己保证调用的就是你想要的函数或对象。

### 4.7 类型工厂函数 ###

所有的内建类型都是类，原来的内建转换函数像int(), type(), list()都成了工厂函数。当你调用的时候，实际上是生成了该类型的一个实例，就像工厂生产货物一样。

- int(), long(), float(), complex()
- str(), unicode(), basestring()
- list(), tuple()
- type()
- dict()
- bool()
- set(), frozenset()
- object()
- calssmethod()
- staticmethod()
- super()
- propetry()
- file()

### 4.8 标准类型的分类 ###

- 基本 是指这些类型都是Python提供的标准或核心类型
- 内建 是由于这些类型是Python默认提供的
- 数据 是因为他们用于一般数据存储
- 对象 是因为对象是数据和功能的默认抽象
- 原始 是因为这些类型提供的是最底层的粒度数据存储
- 类型 是因为他们就是数据类型

#### 4.8.1 存储模型 ####

对类型进行分类的第一种方式， 就是看这种类型的对象能保存多少个对象。一个能保存单个字面对象的类型，是原子或标量存储；那些可容乃多个对象的类型，是容器存储。所有的容器对象都可以容纳不同类型的对象。


| 分类  			| python类型 		|
| ------------- |:-------------:	|
| 标量/原子类型 	| 数值， 字符串		|
| 容器类型 		| 列表，元祖， 字典  	|

#### 4.8.2 更新模型 ####

对象创建后，它的值还可以进行更新么？

| 分类  			| python类型 		|
| ------------- |:-------------:	|
| 可变类型 		| 列表，字典		 	|
| 不可变类型 		| 数字，字符串，元祖 	|

    x = 'Python numbers and strings'
	x = 'are immutable?'

在上述代码中，一个新对象被创建，然后去带了旧对象。可以通过id()判断是否是同一个对象。

#### 4.8.3 访问模型 ####

访问模型有三种访问方式： 直接存取， 顺序和映射。对于非容器类型可以直接访问，所有数值类型都归到这一类。

序列模型是值容器内的元素从0开始的索引吮吸访问。一个可以访问一个元素或多个元素，也就是切片。字符串，列表和元祖都归到这一类。

映射访问类似序列的索引，不过它的元素无序存放，通过一个唯一的键来访问，这就是映射类型， 是键值对的集合。

| 分类  			| python类型 		|
| ------------- |:-------------:	|
| 直接访问	 	| 数字				|
| 序列访问 		| 字符串 列表 元祖  	|
| 映射访问 		| 字典			  	|

#### 4.9 不支持的类型 ####

1. char或byte
2. 指针
3. int vs short vs long
4. float vs double


---EOF---
