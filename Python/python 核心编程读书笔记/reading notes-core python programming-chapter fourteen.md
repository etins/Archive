---
title: Reading notes-core python programming-chapter fourteen
categories: tech
tags: python
---

## 第14章 执行环境 ##

### 可调用对象 ###

许多的Python对象都是我们所说的可调用的，既是任何能够通过函数操作符“()”来调用的对象。Python由4种可调用对象：函数，方法，类以及一些类的实例。记住这些对象的任何引用或者别名都是可调用的。

#### 函数 ####

##### 内建函数（BIF） #####

内建函数是用C/C++写的，编译过后的放入Python解释器，然后把它们作为第一（内建）名称空间的一部分加载进系统。这些函数在__bulitin__模块，并作为__bulitin__模块导入到解释器中。使用dir(type)可以列出函数的所有属性。

从内部机制看，BIF和内建方法（BM）属于相同的类型。但不能应用于工厂函数，因为type()会返回产生对象的类型。

##### 用户定义的函数（UDF） #####

用户定义的函数定义在模块的最高级，因此也会作为全局名称空间的一部分装载到系统中。函数也可以在其它的函数体内定义。可以对多重嵌套作用于的属性访问。

##### lambda表达式 #####

通过lambda表达式来创建的对象除了没有命名之外，享有和用户自定义函数相同的属性；

#### 方法 ####

##### 内建方法（BIM） #####

>pass

##### 用户自定义方法（UDM） #####

>pass

#### 类 ####

>pass

#### 类的实例 ####

只有定义类的时候实现了__call__方法，类的实例才能成为可调用的。

### 代码对象 ###

一般说来，代码对象可以作为函数或者方法调用的一部分来执行，也可用exec语句或内建函数eval()来执行，从整体看，一个Python模块的代码对象是构成该模块的全部代码。

如果要执行Python代码，那么该代码必须先要转换成字节编译的代码（又称字节码）。这才是真正的代码对象。它们不包含任何执行环境的信息，这便是可调用物存在的原因，它被用来包装一个代码对象并提供额外的信息。

### 可执行对象和内建函数 ###

Python提供了大量的BIF来支持可调用/可执行对象，其中包括exec语句。这些函数帮助程序员执行代码对象，也可以用内建函数compile()来生成代码对象。

#### callable() ####

callable()是一个布尔函数，确定一个对象是否可以通过函数操作符（()）来调用。

#### compile() ####

compile()函数允许程序员在运行时刻迅速生成代码对象，然后就可以用exec语句或者内建函数eval()来执行这些代码对象或者对它们进行求值。一个很重要的观点是：exec()和eval()都可以执行字符串格式的Python代码。当执行字符串形式的代码时，每次都必须都这些代码进行字节便宜处理。compile()函数提供了一次性字节码的预编译，以后每次调用的时候，都不用编译了。

#### eval() ####

eval()对表达式求值，后者可以为字符串或内建函数compile()创建的预编译代码对象。还有两个可选参数，此处不做叙述。

#### exec ####

和eval()相似。但exec只可以接受一个参数，并且exec还可以接受有效的Python文件对象。

#### input() ####

内建函数input()是eval()和raw_input()的组合，等价于eval( raw-input() ).

### 执行其它Python程序 ####

#### 导入 ####

第一次导入模块会执行模块高级别的代码。只有属于模块最高级别的代码才是全局变量，全局类和全局函数声明。当你导入foo模块时候，它会运行所有最高级别的（既没有缩进的）Python代码，，比如main()函数。那么如何处理那些不想每次导入都执行的代码呢？缩进它，并放入 if __name__ == '__main__'的内部。

#### execfile() ####

导入模块不是从另外的Python脚本中运行Python脚本最可行的方法，导入模块的副作用就是高级代码运行。

    execfile(filename)

上述代码执行了一个模块，但是仅可以在现有的执行环境下运行。

### 执行其它非Python程序 ###

在Python程序里我们也可以执行非Python程序。这些程序包括了二进制可执行文件，其它的shell脚本等。

- os.system()  接受字符串形式的系统命令并且执行
- os.popen()   是文件对象和system()函数的结合。返回一个类文件对象
- os.fork(), os.exec(), os.wait()
- os.spawn()
- subprocess模块



--EOF--
