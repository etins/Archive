---
title: Reading notes-core python programming-chapter nine
categories: tech
tags: python
---

## 第9章 文件和输入输出 ##

### 9.1 文件对象 ###

文件对象不仅可以用来访问普通的磁盘文件，也可以访问任何其他类型抽象层上的“文件”。一旦设置了合适的“钩子”，就可以访问具有文件类型接口的其他对象。

内建函数open()返回一个文件对象，对该文件进行后续相关的操作都要用到。还有大量的函数也会返回文件对象或是类文件对象。文件只是连续的字节序列。数据的传输经常会用到字节流，无论字节流还是由单个字节还是大块数据组成。

### 9.2 文件内建函数（open() and file()）

open()内建函数打开文件后会返回一个文件对象，否则引发一个错误。当操作失败，Python会产生一个IOError异常。

    file_object = open(file_name, access_mode='r', buffering=-1)

access_mode代表文件的打开模式，通过，文件使用模式'r', 'W', 'a'模式打开，分别代表读取，写入和追加。使用'r','U'模式打开的文件是已经存在的。使用'W'模式打开的文件若存在则首先清空，然后创建。

buffering用于指示访问文件所采用的缓冲方式。其中0表示不缓冲，1表示只缓冲一行数据，任何其他大于1的值代表使用给定值作为缓冲区大小。不提供该参数或者给其负值代表使用系统默认缓冲机制。一般情况下采用系统默认即可。

#### 9.2.1 工厂函数 file() ####

open()和file()函数具有相同的功能，可以任意替换。通常建议使用open()来读写文件。

#### 9.2.2 通用换行符支持（UNS）####

不同的平台用来表示换行符是不同的，当你使用'U'标志打开文件的时候，所有的行分隔符通过Python的输入方法返回都会被替换为换行符(\n).

### 9.3 文件内建方法 ###

open()成功执行成功并返回一个文件对象之后，所有对该文件的后续操作都将通过这个句柄进行。文件方法可以分为四类：输入，输出，文件内移动及杂项操作。

#### 9.3.1 输入 ####

read()方法用来直接读取字节到字符串中，最多读取给定数目个字节。如果没有给定size参数或者size为负值，文件将被读取至末尾。

readline()方法读取打开文件的一行（读取下个行结束之前的所有字节）。然后整行，包括行结束符，作为字符串返回。和read()相同，有一个可选的size参数，默认为-1，代表读至结束符。

readlines(),会读取所有行然后把他们作为一个字符串列表返回。它的可选参数sizint代表返回的最大字节大小。如果它大于0，那么返回的所有行应该大约由sizint字节。

#### 9.3.2 输出 ####

write()内建方法的功能与read()和readline()相反。它把含有文本数据或二进制数据块的字符串写入到文件中去。

和readlines()一样，writelines()方法是针对列表的操作，它接受一个字符串列表作为参数，将它们写入文件。行结束符并不会被自动加入，所以需要手动地在writelines()之前给每行结尾加上结束符。

#### 9.3.3 文件内移动 ####

seek()方法可以文件中移动指针到不同的位置。offset字节代表相对于某个位置偏移量。位置的默认值是0，代表从文件开头算起，1代笔从当前位置算起，2代表从文件末尾算起。

#### 9.3.4 文件迭代 ####

    for eachLine in f.readLine():

#### 9.3.5 其他 ####

close()通过关闭文件来结束对它的访问。Python垃圾手机机制也会在文件对象的引用计数降至0的时候自动关闭文件。

fileno()方法返回文件的描述符。

调用flush()方法会直接把内部缓存区中数据立刻写入文件，而不是被动地等待输出缓冲区被写入。

#### 9.3.6 其它杂项 ####

      1 # !/usr/bin/python
	  2
	  3 import os
	  4
	  5 filename = raw_input('Enter file name: ')
	  6 fobj = open(filename, 'w')
	  7 while True:
	  8     aLine = raw_input("Enter a line ('.' to quite ): ")
	  9     if aLine != '.':
	 10         fobj.write("%s%s" % (aLine, os.linesep))
	 11     else:
	 12         break
	 13 fobj.close()


### 9.4 文件内建属性 ###

> pass

### 9.5 标准文件 ###

一旦程序执行，就可以访问3个标准文件。分别是标准输入，标准输入和标准错误

Python可以通过sys模块访问这些文件的句柄

### 9.6 命令行参数 ###

sys模块通过sys.argv属性提供了对命令行参数的访问。

- sys.argv 是命令行参数的列表
- len(sys.argv)是命令行参数的个数

      1 # !/usr/bin/python
	  2
	  3 import sys
	  4
	  5 print 'you entered', len(sys.argv), 'arguments....'
	  6 print 'they where: ', str(sys.argv)

### 9.7 文件系统 ###

对文件系统的访问大多通过Python的os模块来实现。该模块是Python访问操作系统功能的主要接口，os会帮你选择正确的模块。

### 9.8 文件执行 ###

> pass

### 9.9 永久存储模块 ###

> pass

### 9.10 相关模块 ###

gzip和zlib模块提供了对zlib压缩库直接访问的接口。zipfile模块可以创建，修改和读取zip文件。

shutil模块提供了高级的文件访问功能。

tempfile模块用于生成临时文件。





















---EOF---
